<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>WebChat - by BonnieDev</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/youtube-embed.css">
    <link rel="stylesheet" href="/css/gradient.css">
    <link rel="stylesheet" href="/css/media_sharing.css">

    <link rel="stylesheet" href="/WebChat/css/styles.css">
    <link rel="stylesheet" href="/WebChat/css/youtube-embed.css">
    <link rel="stylesheet" href="/WebChat/css/gradient.css">
    <link rel="stylesheet" href="/WebChat/css/media_sharing.css">
</head>
<body>
    <canvas id="gradient-canvas"></canvas>
    <div id="chat-container">
        <div class="display-name-block" id="display-name-block">
            <div class="welcome-controls-container">
                <input type="text" id="username" placeholder="Enter your display name" required autocomplete="off">
                <button id="confirm-username">Confirm</button>
                <p class="error-text" id="error-text">Error: name cannot be null.</p>
            </div>
        </div>
        <div id="message-container"></div>
        <div id="image-preview-container"></div>
        <!-- <form id="message-form">
            <button type="button" class="add-image-button" id="add-image-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                  </svg>
            </button>
            <input id="message" placeholder="Join the conversation..." autocomplete="off"></input>
            <button type="submit" class="send-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                    <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z"/>
                </svg>
            </button>
        </form> -->
    </div>

<script src="/js/script.firebase.js"></script>
<script src="/js/message_display.js"></script>
<script src="/js/media_sharing.js"></script>
<script src="/js/emoji_map.js"></script>
<script src="/js/gradient.js"></script>
<script src="/js/user_setup.js"></script>
<script src="/js/nuke_messages.js"></script>

<script src="/WebChat/js/script.firebase.js"></script>
<script src="/WebChat/js/message_display.js"></script>
<script src="/WebChat/js/media_sharing.js"></script>
<script src="/WebChat/js/emoji_map.js"></script>
<script src="/WebChat/js/gradient.js"></script>
<script src="/WebChat/js/user_setup.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"></script>
<script type="module">
    // Import the necessary modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, query, orderBy, onSnapshot, where, deleteDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
    import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyBYdukZ8lo0jDkO1BkWnr4UgYa6hw1l7uI",
        authDomain: "web-chat-8d861.firebaseapp.com",
        projectId: "web-chat-8d861",
        storageBucket: "web-chat-8d861.appspot.com",
        messagingSenderId: "223996312580",
        appId: "1:223996312580:web:616816487b2eddc3ef0951"
    };
    window.firebaseConfig = firebaseConfig;
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
    const messagesRef = collection(db, 'messages');
    const storage = getStorage(app);
    const storageRef = ref(storage);

    onAuthStateChanged(auth, (user) => {
        if (user) {
            // User is signed in.
            console.log("User is signed in:", user.uid);
        } else {
            // User is signed out.
            console.log("User is signed out.");
        }
    });

    window.app = app;
    window.db = db;
    window.messagesRef = messagesRef;
    window.auth = auth;
    window.storage = storage;
    window.storageRef = storageRef;
    window.addDoc = addDoc;
    window.getDocs = getDocs;
    window.query = query;
    window.orderBy = orderBy;
    window.signInAnonymously = signInAnonymously;
    window.onSnapshot = onSnapshot;
    window.ref = ref;
    window.uploadBytes = uploadBytes;
    window.getDownloadURL = getDownloadURL;
    window.collection = collection;
    window.where = where;
    window.deleteDoc = deleteDoc;
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>haha</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="chat-container">
        <div class="display-name-block" id="display-name-block">
            <div class="welcome-controls-container">
                <input type="text" id="username" placeholder="Enter your display name" required autocomplete="off">
                <button id="confirm-username">Confirm</button>
                <p class="error-text" id="error-text">Error: name cannot be null.</p>
            </div>
        </div>
        <div id="message-container"></div>
        <form id="message-form">
            <input type="text" id="message" placeholder="Join the conversation..." required autocomplete="off">
            <button type="submit">Send</button>
        </form>
    </div>

    <script src="script.firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"></script>
<script type="module">
    // Import the necessary modules
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
    import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBYdukZ8lo0jDkO1BkWnr4UgYa6hw1l7uI",
      authDomain: "web-chat-8d861.firebaseapp.com",
      projectId: "web-chat-8d861",
      storageBucket: "web-chat-8d861.appspot.com",
      messagingSenderId: "223996312580",
      appId: "1:223996312580:web:616816487b2eddc3ef0951"
    };
    window.firebaseConfig = firebaseConfig;
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
    const messagesRef = collection(db, 'messages');

    onAuthStateChanged(auth, (user) => {
        if (user) {
            // User is signed in.
            console.log("User is signed in:", user.uid);
        } else {
            // User is signed out.
            console.log("User is signed out.");
        }
    });

    window.app = app;
    window.db = db;
    window.messagesRef = messagesRef;
    window.auth = auth;
    window.addDoc = addDoc;
    window.getDocs = getDocs;
    window.query = query;
    window.orderBy = orderBy;
    window.signInAnonymously = signInAnonymously;
    window.onSnapshot = onSnapshot;
</script>
</body>
</html>
